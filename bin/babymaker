#!/usr/bin/env python3
#
# Author: Yipeng Sun <syp at umd dot edu>
# License: BSD 2-clause
# Last Change: Wed Sep 04, 2019 at 05:15 AM -0400

from argparse import ArgumentParser
from pyBabyMaker.babymaker import BabyMaker


#################################
# Command line arguments parser #
#################################

def parse_input():
    parser = ArgumentParser(description='''
generate compilable C++ source file for ntuple processing.''')

    parser.add_argument('-i', '--input',
                        nargs='?',
                        required=True,
                        help='''
path to input YAML file.''')

    parser.add_argument('-o', '--output',
                        nargs='?',
                        required=True,
                        help='''
path to output C++ file.''')

    parser.add_argument('-d', '--data',
                        nargs='?',
                        required=True,
                        help='''
path to data ntuple file.''')

    return parser.parse_args()


########
# Main #
########

if __name__ == '__main__':
    args = parse_input()
    generator = BabyMaker(args.input, args.data)
    generator.write(args.output)
